!function(){"use strict";var e=wp.editPost,t=wp.i18n,o=wp.components,n=wp.data,a=wp.compose;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=(0,n.withSelect)((function(e){var t,o,n,a,l,i,c=e("core/editor").getEditedPostAttribute,r=e("core"),s=r.getMedia,u=(0,r.getPostType)(c("type")),d=!1,m=!1;return u&&u.supports["custom-fields"]&&u.supports["custom-fields"]&&(m=!0),m&&(t=c("meta")._carkeekblocks_title_hidden,o=c("meta")._carkeekblocks_featuredimage_hidden,n=c("meta")._carkeekblocks_featured_image_focal_point,l=(a=c("featured_media"))?s(a):null,(d=!(!ckBlocksVars||1!=ckBlocksVars.supportsOpacity))&&101===(i=c("meta")._carkeekblocks_featured_image_opacity)&&(i=parseInt(ckBlocksVars.opacityDefault))),{hideTitle:t,hideFeaturedImage:o,featuredMedia:l,featuredImageFocalPoint:n,supportsMeta:m,featuredImageOpacity:i,supportsOpacity:d}})),c=(0,n.withDispatch)((function(e){var t=e("core/editor").editPost;return{setHideTitle:function(e){t({meta:{_carkeekblocks_title_hidden:e}})},setHideFeaturedImage:function(e){t({meta:{_carkeekblocks_featuredimage_hidden:e}})},setFeaturedImageFocalPoint:function(e){t({meta:{_carkeekblocks_featured_image_focal_point:e}})},setFeaturedImageOpacity:function(e){t({meta:{_carkeekblocks_featured_image_opacity:e}})}}})),r=(0,a.compose)(i,c)((function(n){var a,i,c=n.hideTitle,r=n.setHideTitle,s=n.hideFeaturedImage,u=n.setHideFeaturedImage,d=n.featuredMedia,m=n.featuredImageFocalPoint,p=n.setFeaturedImageFocalPoint,k=n.supportsMeta,g=n.supportsOpacity,_=n.setFeaturedImageOpacity,h=n.featuredImageOpacity,b=document.querySelector(".editor-post-title__block"),f={x:.5,y:.5};if(!g||m&&"object"===l(m)||p(f),b){var y=void 0!==c&&void 0!==c&&c,w=y?"carkeek-blocks-title-hidden":"carkeek-blocks-title-visible";y?document.body.classList.remove("carkeek-blocks-title-visible"):document.body.classList.remove("carkeek-blocks-title-hidden"),document.body.classList.add(w)}if(!s&&d&&d.source_url){var v=d.source_url,F=d.media_details,C=F.width,P=F.height,E=g?"ck-focal-point-wrapper has-opacity":"";a=wp.element.createElement("div",{className:E,style:{"--focal-opacity":h}},wp.element.createElement(o.FocalPointPicker,{label:(0,t.__)("Featured Image Focal Point"),url:v,dimensions:{width:C,height:P},value:m,onChange:function(e){return p(e)}}),wp.element.createElement(o.Button,{variant:"secondary",className:"is-secondary",onClick:function(){p(f)}},"Reset FocalPoint")),g&&(i=wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(o.RangeControl,{label:"Overlay Opacity",value:h,onChange:function(e){return _(e)},min:0,max:50,step:5})))}var I=wp.element.createElement(o.CheckboxControl,{className:"carkeek-hide-featured-image-label",label:"Hide Featured Image",checked:s,onChange:function(e){return u(e)},help:s?(0,t.__)("The Featured Image is hidden on the rendered page.","carkeek-blocks"):(0,t.__)("The Featured Image is visible on the rendered page.","carkeek-blocks")});return wp.element.createElement(e.PluginDocumentSettingPanel,{name:"page-header-settings-panel",title:"Page Header Settings",className:"page-header-settings-panel"},k&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(o.CheckboxControl,{className:"carkeek-hide-title-label",label:(0,t.__)("Hide Page Title","carkeek-blocks"),checked:c,onChange:function(e){return r(e)},help:c?(0,t.__)("Title is hidden on the rendered page.","carkeek-blocks"):null}),I,a,i,wp.element.createElement("p",null),wp.element.createElement("p",null,"These settings may not be applied on all pages/posts.")),!k&&wp.element.createElement("p",null,"Not supported for this post type. If you want to use this feature on this post, let your site admin know that this post type must support 'custom-fields'."))})),s=wp.plugins;(0,s.registerPlugin)("carkeek-blocks-pageheader",{icon:!1,render:r}),(0,s.registerPlugin)("carkeek-blocks-sidebar",{icon:!1,render:function(){var a=(0,n.useSelect)((function(e){return e("core/edit-post").isFeatureActive("ckGroupOutlines")})),l=(0,n.useSelect)((function(e){return e("core/edit-post").isFeatureActive("ckColumnOutlines")})),i=(0,n.useSelect)((function(e){return e("core/edit-post").isFeatureActive("ckBlockOutlines")})),c=(0,n.useDispatch)("core/edit-post").toggleFeature;return a?document.body.classList.add("is-group-lines-on"):document.body.classList.remove("is-group-lines-on"),l?document.body.classList.add("is-column-lines-on"):document.body.classList.remove("is-column-lines-on"),i?document.body.classList.add("is-block-lines-on"):document.body.classList.remove("is-block-lines-on"),wp.element.createElement(e.PluginSidebar,{name:"carkeek-blocks-sidebar",icon:"admin-settings",title:(0,t.__)("Carkeek Blocks")},wp.element.createElement(o.PanelBody,{title:(0,t.__)("Editor Controls")},wp.element.createElement(o.ToggleControl,{label:(0,t.__)("Outline Groups"),checked:a,help:(0,t.__)("Show outlines on Group Blocks in edit view"),onChange:function(){c("ckGroupOutlines")}}),wp.element.createElement(o.ToggleControl,{label:(0,t.__)("Outline Columns"),checked:l,help:(0,t.__)("Show outlines on Column Blocks in edit view"),onChange:function(){c("ckColumnOutlines")}}),wp.element.createElement(o.ToggleControl,{label:(0,t.__)("Outline All Blocks"),checked:i,help:(0,t.__)("Show outlines on all Blocks in edit view"),onChange:function(){c("ckBlockOutlines")}})))}})}();