(()=>{"use strict";const e=window.React,t=window.wp.editor,o=window.wp.i18n,a=window.wp.components,l=window.wp.data,s=window.wp.compose,c=(0,l.withSelect)((e=>{const{getEditedPostAttribute:t}=e("core/editor"),{getMedia:o,getPostType:a}=e("core"),{getSettings:l}=e("core/block-editor"),s=l().colors||[],c=a(t("type"));let i,r,n,d,u,m,k,p=!1,g=!1,_=!1;return c&&c.supports["custom-fields"]&&c.supports["custom-fields"]&&(g=!0),g&&(i=t("meta")._carkeekblocks_title_hidden,r=t("meta")._carkeekblocks_featuredimage_hidden,n=t("meta")._carkeekblocks_featured_image_focal_point,d=t("featured_media"),u=d?o(d):null,p=!(!ckBlocksVars||1!=ckBlocksVars.supportsOpacity),p&&(m=t("meta")._carkeekblocks_featured_image_opacity,101===m&&(m=parseInt(ckBlocksVars.opacityDefault))),ckBlocksVars&&1==ckBlocksVars.supportsColor&&(_=!0,k=t("meta")._carkeekblocks_featured_image_color)),{hideTitle:i,hideFeaturedImage:r,featuredMedia:u,featuredImageFocalPoint:n,supportsMeta:g,featuredImageOpacity:m,supportsOpacity:p,supportsColor:_,featuredImageColor:k,themeColors:s}})),i=(0,l.withDispatch)((e=>{const{editPost:t}=e("core/editor");return{setHideTitle:e=>{t({meta:{_carkeekblocks_title_hidden:e}})},setHideFeaturedImage:e=>{t({meta:{_carkeekblocks_featuredimage_hidden:e}})},setFeaturedImageFocalPoint:e=>{t({meta:{_carkeekblocks_featured_image_focal_point:e}})},setFeaturedImageOpacity:e=>{t({meta:{_carkeekblocks_featured_image_opacity:e}})},setFeaturedImageColor:e=>{t({meta:{_carkeekblocks_featured_image_color:e}})}}})),r=(0,s.compose)(c,i)((function(l){const{hideTitle:s,setHideTitle:c,hideFeaturedImage:i,setHideFeaturedImage:r,featuredMedia:n,featuredImageFocalPoint:d,setFeaturedImageFocalPoint:u,supportsMeta:m,supportsOpacity:k,setFeaturedImageOpacity:p,featuredImageOpacity:g,setFeaturedImageColor:_,featuredImageColor:h,supportsColor:b,themeColors:f}=l,y=document.querySelector(".editor-visual-editor__post-title-wrapper"),C={x:.5,y:.5};if(!k||d&&"object"==typeof d||u(C),y){const e=void 0!==s&&void 0!==s&&s,t=e?"carkeek-blocks-title-hidden":"carkeek-blocks-title-visible";e?document.body.classList.remove("carkeek-blocks-title-visible"):document.body.classList.remove("carkeek-blocks-title-hidden"),document.body.classList.add(t),Array.from(y.classList).forEach((e=>{e.startsWith("has-")&&e.includes("-background")&&y.classList.remove(e)})),h&&(y.classList.add(`has-${h}-background-color`),y.classList.add("has-background"))}let w,F,v;if(!i&&n&&n.source_url){const t=n.source_url,{width:l,height:s}=n.media_details,c=k?"ck-focal-point-wrapper has-opacity":"";w=(0,e.createElement)("div",{className:c,style:{"--focal-opacity":g}},(0,e.createElement)(a.FocalPointPicker,{label:(0,o.__)("Featured Image Focal Point"),url:t,dimensions:{width:l,height:s},value:d,onChange:e=>u(e)}),(0,e.createElement)(a.Button,{variant:"secondary",className:"is-secondary",onClick:function(){u(C)}},"Reset FocalPoint")),k&&(F=(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.RangeControl,{label:"Overlay Opacity",value:g,onChange:e=>p(e),min:0,max:50,step:5})))}b&&(v=(0,e.createElement)(e.Fragment,null,(0,e.createElement)("label",{style:{marginTop:"12px"},class:"components-base-control__label css-2o4jwd ej5x27r2",for:"components-circular-option-picker-0"},"Header Color"),(0,e.createElement)(a.ColorPalette,{colors:f,disableCustomColors:!0,value:h?f.find((e=>e.slug===h))?.color:null,onChange:e=>{if(null==e)_(null);else{const t=f.find((t=>t.color===e));_(t?t.slug:null)}},clearable:!0})));const E=(0,e.createElement)(a.CheckboxControl,{className:"carkeek-hide-featured-image-label",label:"Hide Featured Image",checked:i,onChange:e=>r(e),help:i?(0,o.__)("The Featured Image is hidden on the rendered page.","carkeek-blocks"):(0,o.__)("The Featured Image is visible on the rendered page.","carkeek-blocks")});return(0,e.createElement)(t.PluginDocumentSettingPanel,{name:"page-header-settings-panel",title:"Page Header Settings",className:"page-header-settings-panel"},m&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.CheckboxControl,{className:"carkeek-hide-title-label",label:(0,o.__)("Hide Page Title","carkeek-blocks"),checked:s,onChange:e=>c(e),help:s?(0,o.__)("Title is hidden on the rendered page.","carkeek-blocks"):null}),E,w,F,v,(0,e.createElement)("p",null),(0,e.createElement)("p",null,"These settings may not be applied on all pages/posts.")),!m&&(0,e.createElement)("p",null,"Not supported for this post type. If you want to use this feature on this post, let your site admin know that this post type must support 'custom-fields'."))})),n=window.wp.plugins;(0,n.registerPlugin)("carkeek-blocks-pageheader",{icon:!1,render:r}),(0,n.registerPlugin)("carkeek-blocks-sidebar",{icon:!1,render:function(){const s=(0,l.useSelect)((e=>e("core/edit-post").isFeatureActive("ckGroupOutlines"))),c=(0,l.useSelect)((e=>e("core/edit-post").isFeatureActive("ckColumnOutlines"))),i=(0,l.useSelect)((e=>e("core/edit-post").isFeatureActive("ckBlockOutlines"))),{toggleFeature:r}=(0,l.useDispatch)("core/edit-post");return s?document.body.classList.add("is-group-lines-on"):document.body.classList.remove("is-group-lines-on"),c?document.body.classList.add("is-column-lines-on"):document.body.classList.remove("is-column-lines-on"),i?document.body.classList.add("is-block-lines-on"):document.body.classList.remove("is-block-lines-on"),(0,e.createElement)(t.PluginSidebar,{name:"carkeek-blocks-sidebar",icon:"admin-settings",title:(0,o.__)("Carkeek Blocks")},(0,e.createElement)(a.PanelBody,{title:(0,o.__)("Editor Controls")},(0,e.createElement)(a.ToggleControl,{label:(0,o.__)("Outline Groups"),checked:s,help:(0,o.__)("Show outlines on Group Blocks in edit view"),onChange:()=>{r("ckGroupOutlines")}}),(0,e.createElement)(a.ToggleControl,{label:(0,o.__)("Outline Columns"),checked:c,help:(0,o.__)("Show outlines on Column Blocks in edit view"),onChange:()=>{r("ckColumnOutlines")}}),(0,e.createElement)(a.ToggleControl,{label:(0,o.__)("Outline All Blocks"),checked:i,help:(0,o.__)("Show outlines on all Blocks in edit view"),onChange:()=>{r("ckBlockOutlines")}})))}})})();