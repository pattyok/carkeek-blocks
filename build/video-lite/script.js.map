{"version":3,"file":"video-lite/script.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,cAAc;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,eAAe,IAAI,gBAAgB;AACnG,0CAA0C,eAAe,IAAI,gBAAgB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,GAAG;AACtB,mBAAmB,GAAG;AACtB,mBAAmB,GAAG;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,iDAAiD,aAAa,GAAG,QAAQ,MAAM,kBAAkB;AACjG;AACA;AACA;AACA,wBAAwB,UAAU,iBAAiB,WAAW;AAC9D,yBAAyB,OAAO;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,aAAa;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,aAAa;AAC9D,kEAAkE,MAAM;AACxE,kEAAkE,MAAM;AACxE;AACA;AACA;AACA,kEAAkE,eAAe,IAAI,gBAAgB;AACrG,2DAA2D,eAAe,IAAI,gBAAgB;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD,mBAAmB,GAAG;AACtB,mBAAmB,GAAG;AACtB,mBAAmB,GAAG;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACyB;AAC1B;AACA;AACA;;;;;;;;;;;;;;AC/VO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB,GAAG,4BAA4B;AACzE;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA,8BAA8B,wBAAwB;AACtD;AACA;AACA,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,eAAe,IAAI,gBAAgB;AAC/F,sCAAsC,eAAe,IAAI,gBAAgB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gBAAgB;AACzE;AACA;AACA,iCAAiC,aAAa;AAC9C;AACA;AACA,2GAA2G,aAAa;AACxH;AACA;AACA;AACA,iCAAiC,gBAAgB;AACjD,wBAAwB,UAAU,iBAAiB,WAAW;AAC9D,4BAA4B,cAAc,aAAa,YAAY,WAAW,SAAS,GAAG,YAAY;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,6DAA6D,aAAa,GAAG,mBAAmB;AAChG,wDAAwD,aAAa,GAAG,mBAAmB;AAC3F;AACA;AACA;AACA;AACA,8DAA8D,eAAe,IAAI,gBAAgB;AACjG,yDAAyD,eAAe,IAAI,gBAAgB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,yDAAyD;AAC5G,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;UC7RA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;ACNqC","sources":["webpack://carkeek-blocks-v2/./node_modules/@slightlyoff/lite-vimeo/lite-vimeo.js","webpack://carkeek-blocks-v2/./node_modules/@justinribeiro/lite-youtube/lite-youtube.js","webpack://carkeek-blocks-v2/webpack/bootstrap","webpack://carkeek-blocks-v2/webpack/runtime/define property getters","webpack://carkeek-blocks-v2/webpack/runtime/hasOwnProperty shorthand","webpack://carkeek-blocks-v2/webpack/runtime/make namespace object","webpack://carkeek-blocks-v2/./src/video-lite/script.js"],"sourcesContent":["/**\n *\n * The shadowDom / Intersection Observer version of Paul's concept:\n * https://github.com/paulirish/lite-youtube-embed\n *\n * A lightweight YouTube embed. Still should feel the same to the user, just\n * MUCH faster to initialize and paint.\n *\n * Thx to these as the inspiration\n *   https://storage.googleapis.com/amp-vs-non-amp/youtube-lazy.html\n *   https://autoplay-youtube-player.glitch.me/\n *\n * Once built it, I also found these (üëçüëç):\n *   https://github.com/ampproject/amphtml/blob/master/extensions/amp-youtube\n *   https://github.com/Daugilas/lazyYT https://github.com/vb/lazyframe\n */\n/*\n * Vimeo example embed markup:\n<iframe src=\"https://player.vimeo.com/video/364402896\"\n  width=\"640\" height=\"360\"\n  frameborder=\"0\"\n  allow=\"autoplay; fullscreen\" allowfullscreen>\n</iframe>\n<p><a href=\"https://vimeo.com/364402896\">\n  Alex Russell - The Mobile Web: MIA</a> from\n    <a href=\"https://vimeo.com/fronteers\">Fronteers</a>\n    on <a href=\"https://vimeo.com\">Vimeo</a>.\n</p>\n */\nlet LiteVimeoEmbed = /** @class */ (() => {\n    class LiteVimeoEmbed extends HTMLElement {\n        constructor() {\n            super();\n            this.iframeLoaded = false;\n            this.setupDom();\n        }\n        static get observedAttributes() {\n            return ['videoid'];\n        }\n        connectedCallback() {\n            this.addEventListener('pointerover', LiteVimeoEmbed.warmConnections, {\n                once: true,\n            });\n            this.addEventListener('click', () => this.addIframe());\n        }\n        get videoId() {\n            return encodeURIComponent(this.getAttribute('videoid') || '');\n        }\n        set videoId(id) {\n            this.setAttribute('videoid', id);\n        }\n        get videoTitle() {\n            return this.getAttribute('videotitle') || 'Video';\n        }\n        set videoTitle(title) {\n            this.setAttribute('videotitle', title);\n        }\n        get videoPlay() {\n            return this.getAttribute('videoPlay') || 'Play';\n        }\n        set videoPlay(name) {\n            this.setAttribute('videoPlay', name);\n        }\n        get videoStartAt() {\n            return this.getAttribute('videoPlay') || '0s';\n        }\n        set videoStartAt(time) {\n            this.setAttribute('videoPlay', time);\n        }\n        get autoLoad() {\n            return this.hasAttribute('autoload');\n        }\n        set autoLoad(value) {\n            if (value) {\n                this.setAttribute('autoload', '');\n            }\n            else {\n                this.removeAttribute('autoload');\n            }\n        }\n        get autoPlay() {\n            return this.hasAttribute('autoplay');\n        }\n        set autoPlay(value) {\n            if (value) {\n                this.setAttribute('autoplay', 'autoplay');\n            }\n            else {\n                this.removeAttribute('autoplay');\n            }\n        }\n        /**\n         * Define our shadowDOM for the component\n         */\n        setupDom() {\n            const shadowDom = this.attachShadow({ mode: 'open' });\n            shadowDom.innerHTML = `\n      <style>\n        :host {\n          contain: content;\n          display: block;\n          position: relative;\n          width: 100%;\n          padding-bottom: calc(100% / (16 / 9));\n        }\n\n        #frame, #fallbackPlaceholder, iframe {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n        }\n\n        #frame {\n          cursor: pointer;\n        }\n\n        #fallbackPlaceholder {\n          object-fit: cover;\n        }\n\n        #frame::before {\n          content: '';\n          display: block;\n          position: absolute;\n          top: 0;\n          background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==);\n          background-position: top;\n          background-repeat: repeat-x;\n          height: 60px;\n          padding-bottom: 50px;\n          width: 100%;\n          transition: all 0.2s cubic-bezier(0, 0, 0.2, 1);\n          z-index: 1;\n        }\n        /* play button */\n        .lvo-playbtn {\n          width: 70px;\n          height: 46px;\n          background-color: #212121;\n          z-index: 1;\n          opacity: 0.8;\n          border-radius: 10%;\n          transition: all 0.2s cubic-bezier(0, 0, 0.2, 1);\n          border: 0;\n        }\n        #frame:hover .lvo-playbtn {\n          background-color: rgb(98, 175, 237);\n          opacity: 1;\n        }\n        /* play button triangle */\n        .lvo-playbtn:before {\n          content: '';\n          border-style: solid;\n          border-width: 11px 0 11px 19px;\n          border-color: transparent transparent transparent #fff;\n        }\n        .lvo-playbtn,\n        .lvo-playbtn:before {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate3d(-50%, -50%, 0);\n        }\n\n        /* Post-click styles */\n        .lvo-activated {\n          cursor: unset;\n        }\n\n        #frame.lvo-activated::before,\n        .lvo-activated .lvo-playbtn {\n          display: none;\n        }\n      </style>\n      <div id=\"frame\">\n        <picture>\n          <source id=\"webpPlaceholder\" type=\"image/webp\">\n          <source id=\"jpegPlaceholder\" type=\"image/jpeg\">\n          <img id=\"fallbackPlaceholder\"\n               referrerpolicy=\"origin\"\n               width=\"1100\"\n               height=\"619\"\n               decoding=\"async\"\n               loading=\"lazy\">\n        </picture>\n        <button class=\"lvo-playbtn\"></button>\n      </div>\n    `;\n            this.domRefFrame = this.shadowRoot.querySelector('#frame');\n            this.domRefImg = {\n                fallback: this.shadowRoot.querySelector('#fallbackPlaceholder'),\n                webp: this.shadowRoot.querySelector('#webpPlaceholder'),\n                jpeg: this.shadowRoot.querySelector('#jpegPlaceholder'),\n            };\n            this.domRefPlayButton = this.shadowRoot.querySelector('.lvo-playbtn');\n        }\n        /**\n         * Parse our attributes and fire up some placeholders\n         */\n        setupComponent() {\n            this.initImagePlaceholder();\n            this.domRefPlayButton.setAttribute('aria-label', `${this.videoPlay}: ${this.videoTitle}`);\n            this.setAttribute('title', `${this.videoPlay}: ${this.videoTitle}`);\n            if (this.autoLoad) {\n                this.initIntersectionObserver();\n            }\n        }\n        /**\n         * Lifecycle method that we use to listen for attribute changes to period\n         * @param {*} name\n         * @param {*} oldVal\n         * @param {*} newVal\n         */\n        attributeChangedCallback(name, oldVal, newVal) {\n            switch (name) {\n                case 'videoid': {\n                    if (oldVal !== newVal) {\n                        this.setupComponent();\n                        // if we have a previous iframe, remove it and the activated class\n                        if (this.domRefFrame.classList.contains('lvo-activated')) {\n                            this.domRefFrame.classList.remove('lvo-activated');\n                            this.shadowRoot.querySelector('iframe').remove();\n                        }\n                    }\n                    break;\n                }\n                default:\n                    break;\n            }\n        }\n        /**\n         * Inject the iframe into the component body\n         */\n        addIframe() {\n            if (!this.iframeLoaded) {\n                /**\n                 * Vimeo example embed markup:\n                 *\n                 *  <iframe src=\"https://player.vimeo.com/video/364402896#t=1m3s\"\n                 *    width=\"640\" height=\"360\"\n                 *    frameborder=\"0\"\n                 *    allow=\"autoplay; fullscreen\" allowfullscreen>\n                 *  </iframe>\n                 */\n                // FIXME: add a setting for autoplay\n                const apValue = ((this.autoLoad && this.autoPlay) || (!this.autoLoad)) ?\n                    \"autoplay=1\" : \"\";\n                const srcUrl = new URL(`/video/${this.videoId}?${apValue}&#t=${this.videoStartAt}`, \"https://player.vimeo.com/\");\n                // TODO: construct src value w/ URL constructor\n                const iframeHTML = `\n<iframe frameborder=\"0\"\n  allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n  allowfullscreen src=\"${srcUrl}\"></iframe>`;\n                this.domRefFrame.insertAdjacentHTML('beforeend', iframeHTML);\n                this.domRefFrame.classList.add('lvo-activated');\n                this.iframeLoaded = true;\n            }\n        }\n        /**\n         * Setup the placeholder image for the component\n         */\n        async initImagePlaceholder() {\n            // TODO(slightlyoff): TODO: cache API responses\n            // we don't know which image type to preload, so warm the connection\n            LiteVimeoEmbed.addPrefetch('preconnect', 'https://i.vimeocdn.com/');\n            // API is the video-id based\n            // http://vimeo.com/api/v2/video/364402896.json\n            const apiUrl = `https://vimeo.com/api/v2/video/${this.videoId}.json`;\n            // Now fetch the JSON that locates our placeholder from vimeo's JSON API\n            const apiResponse = (await (await fetch(apiUrl)).json())[0];\n            // Extract the image id, e.g. 819916979, from a URL like:\n            // thumbnail_large: \"https://i.vimeocdn.com/video/819916979_640.jpg\"\n            const tnLarge = apiResponse.thumbnail_large;\n            const imgId = (tnLarge.substr(tnLarge.lastIndexOf(\"/\") + 1)).split(\"_\")[0];\n            // const posterUrlWebp =\n            //    `https://i.ytimg.com/vi_webp/${this.videoId}/hqdefault.webp`;\n            const posterUrlWebp = `https://i.vimeocdn.com/video/${imgId}.webp?mw=1100&mh=619&q=70`;\n            const posterUrlJpeg = `https://i.vimeocdn.com/video/${imgId}.jpg?mw=1100&mh=619&q=70`;\n            this.domRefImg.webp.srcset = posterUrlWebp;\n            this.domRefImg.jpeg.srcset = posterUrlJpeg;\n            this.domRefImg.fallback.src = posterUrlJpeg;\n            this.domRefImg.fallback.setAttribute('aria-label', `${this.videoPlay}: ${this.videoTitle}`);\n            this.domRefImg.fallback.setAttribute('alt', `${this.videoPlay}: ${this.videoTitle}`);\n        }\n        /**\n         * Setup the Intersection Observer to load the iframe when scrolled into view\n         */\n        initIntersectionObserver() {\n            if ('IntersectionObserver' in window &&\n                'IntersectionObserverEntry' in window) {\n                const options = {\n                    root: null,\n                    rootMargin: '0px',\n                    threshold: 0,\n                };\n                const observer = new IntersectionObserver((entries, observer) => {\n                    entries.forEach(entry => {\n                        if (entry.isIntersecting && !this.iframeLoaded) {\n                            LiteVimeoEmbed.warmConnections();\n                            this.addIframe();\n                            observer.unobserve(this);\n                        }\n                    });\n                }, options);\n                observer.observe(this);\n            }\n        }\n        /**\n         * Add a <link rel={preload | preconnect} ...> to the head\n         * @param {*} kind\n         * @param {*} url\n         * @param {*} as\n         */\n        static addPrefetch(kind, url, as) {\n            const linkElem = document.createElement('link');\n            linkElem.rel = kind;\n            linkElem.href = url;\n            if (as) {\n                linkElem.as = as;\n            }\n            linkElem.crossOrigin = 'true';\n            document.head.append(linkElem);\n        }\n        /**\n         * Begin preconnecting to warm up the iframe load Since the embed's netwok\n         * requests load within its iframe, preload/prefetch'ing them outside the\n         * iframe will only cause double-downloads. So, the best we can do is warm up\n         * a few connections to origins that are in the critical path.\n         *\n         * Maybe `<link rel=preload as=document>` would work, but it's unsupported:\n         * http://crbug.com/593267 But TBH, I don't think it'll happen soon with Site\n         * Isolation and split caches adding serious complexity.\n         */\n        static warmConnections() {\n            if (LiteVimeoEmbed.preconnected)\n                return;\n            // Host that Vimeo uses to serve JS needed by player\n            LiteVimeoEmbed.addPrefetch('preconnect', 'https://f.vimeocdn.com');\n            // The iframe document comes from player.vimeo.com\n            LiteVimeoEmbed.addPrefetch('preconnect', 'https://player.vimeo.com');\n            // Image for placeholder comes from i.vimeocdn.com\n            LiteVimeoEmbed.addPrefetch('preconnect', 'https://i.vimeocdn.com');\n            LiteVimeoEmbed.preconnected = true;\n        }\n    }\n    LiteVimeoEmbed.preconnected = false;\n    return LiteVimeoEmbed;\n})();\nexport { LiteVimeoEmbed };\n// Register custom element\ncustomElements.define('lite-vimeo', LiteVimeoEmbed);\n//# sourceMappingURL=lite-vimeo.js.map","export class LiteYTEmbed extends HTMLElement {\n    constructor() {\n        super();\n        this.isIframeLoaded = false;\n        this.setupDom();\n    }\n    static get observedAttributes() {\n        return ['videoid', 'playlistid'];\n    }\n    connectedCallback() {\n        this.addEventListener('pointerover', LiteYTEmbed.warmConnections, {\n            once: true,\n        });\n        this.addEventListener('click', () => this.addIframe());\n    }\n    get videoId() {\n        return encodeURIComponent(this.getAttribute('videoid') || '');\n    }\n    set videoId(id) {\n        this.setAttribute('videoid', id);\n    }\n    get playlistId() {\n        return encodeURIComponent(this.getAttribute('playlistid') || '');\n    }\n    set playlistId(id) {\n        this.setAttribute('playlistid', id);\n    }\n    get videoTitle() {\n        return this.getAttribute('videotitle') || 'Video';\n    }\n    set videoTitle(title) {\n        this.setAttribute('videotitle', title);\n    }\n    get videoPlay() {\n        return this.getAttribute('videoPlay') || 'Play';\n    }\n    set videoPlay(name) {\n        this.setAttribute('videoPlay', name);\n    }\n    get videoStartAt() {\n        return this.getAttribute('videoStartAt') || '0';\n    }\n    get autoLoad() {\n        return this.hasAttribute('autoload');\n    }\n    get noCookie() {\n        return this.hasAttribute('nocookie');\n    }\n    get posterQuality() {\n        return this.getAttribute('posterquality') || 'hqdefault';\n    }\n    get posterLoading() {\n        return (this.getAttribute('posterloading') ||\n            'lazy');\n    }\n    get params() {\n        return `start=${this.videoStartAt}&${this.getAttribute('params')}`;\n    }\n    set params(opts) {\n        this.setAttribute('params', opts);\n    }\n    setupDom() {\n        const shadowDom = this.attachShadow({ mode: 'open' });\n        let nonce = '';\n        if (window.liteYouTubeNonce) {\n            nonce = `nonce=\"${window.liteYouTubeNonce}\"`;\n        }\n        shadowDom.innerHTML = `\n      <style ${nonce}>\n        :host {\n          contain: content;\n          display: block;\n          position: relative;\n          width: 100%;\n          padding-bottom: calc(100% / (16 / 9));\n        }\n\n        @media (max-width: 40em) {\n          :host([short]) {\n            padding-bottom: calc(100% / (9 / 16));\n          }\n        }\n\n        #frame, #fallbackPlaceholder, iframe {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n        }\n\n        #frame {\n          cursor: pointer;\n        }\n\n        #fallbackPlaceholder {\n          object-fit: cover;\n        }\n\n        #frame::before {\n          content: '';\n          display: block;\n          position: absolute;\n          top: 0;\n          background-image: linear-gradient(180deg, #111 -20%, transparent 90%);\n          height: 60px;\n          width: 100%;\n          z-index: 1;\n        }\n\n        #playButton {\n          width: 68px;\n          height: 48px;\n          background-color: transparent;\n          background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 68 48\"><path d=\"M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z\" fill=\"red\"/><path d=\"M45 24 27 14v20\" fill=\"white\"/></svg>');\n          z-index: 1;\n          border: 0;\n          border-radius: inherit;\n        }\n\n        #playButton:before {\n          content: '';\n          border-style: solid;\n          border-width: 11px 0 11px 19px;\n          border-color: transparent transparent transparent #fff;\n        }\n\n        #playButton,\n        #playButton:before {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate3d(-50%, -50%, 0);\n          cursor: inherit;\n        }\n\n        /* Post-click styles */\n        .activated {\n          cursor: unset;\n        }\n\n        #frame.activated::before,\n        #frame.activated > #playButton {\n          display: none;\n        }\n      </style>\n      <div id=\"frame\">\n        <picture>\n          <source id=\"webpPlaceholder\" type=\"image/webp\">\n          <source id=\"jpegPlaceholder\" type=\"image/jpeg\">\n          <img id=\"fallbackPlaceholder\" referrerpolicy=\"origin\" loading=\"lazy\">\n        </picture>\n        <button id=\"playButton\"></button>\n      </div>\n    `;\n        this.domRefFrame = shadowDom.querySelector('#frame');\n        this.domRefImg = {\n            fallback: shadowDom.querySelector('#fallbackPlaceholder'),\n            webp: shadowDom.querySelector('#webpPlaceholder'),\n            jpeg: shadowDom.querySelector('#jpegPlaceholder'),\n        };\n        this.domRefPlayButton = shadowDom.querySelector('#playButton');\n    }\n    setupComponent() {\n        this.initImagePlaceholder();\n        this.domRefPlayButton.setAttribute('aria-label', `${this.videoPlay}: ${this.videoTitle}`);\n        this.setAttribute('title', `${this.videoPlay}: ${this.videoTitle}`);\n        if (this.autoLoad || this.isYouTubeShort()) {\n            this.initIntersectionObserver();\n        }\n    }\n    attributeChangedCallback(name, oldVal, newVal) {\n        switch (name) {\n            case 'videoid':\n            case 'playlistid':\n            case 'videoTitle':\n            case 'videoPlay': {\n                if (oldVal !== newVal) {\n                    this.setupComponent();\n                    if (this.domRefFrame.classList.contains('activated')) {\n                        this.domRefFrame.classList.remove('activated');\n                        this.shadowRoot.querySelector('iframe').remove();\n                        this.isIframeLoaded = false;\n                    }\n                }\n                break;\n            }\n            default:\n                break;\n        }\n    }\n    addIframe(isIntersectionObserver = false) {\n        if (!this.isIframeLoaded) {\n            let autoplay = isIntersectionObserver ? 0 : 1;\n            const wantsNoCookie = this.noCookie ? '-nocookie' : '';\n            let embedTarget;\n            if (this.playlistId) {\n                embedTarget = `?listType=playlist&list=${this.playlistId}&`;\n            }\n            else {\n                embedTarget = `${this.videoId}?`;\n            }\n            if (this.isYouTubeShort()) {\n                this.params = `loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`;\n                autoplay = 1;\n            }\n            const iframeHTML = `\n<iframe frameborder=\"0\" title=\"${this.videoTitle}\"\n  allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\n  src=\"https://www.youtube${wantsNoCookie}.com/embed/${embedTarget}autoplay=${autoplay}&${this.params}\"\n></iframe>`;\n            this.domRefFrame.insertAdjacentHTML('beforeend', iframeHTML);\n            this.domRefFrame.classList.add('activated');\n            this.isIframeLoaded = true;\n            this.attemptShortAutoPlay();\n            this.dispatchEvent(new CustomEvent('liteYoutubeIframeLoaded', {\n                detail: {\n                    videoId: this.videoId,\n                },\n                bubbles: true,\n                cancelable: true,\n            }));\n        }\n    }\n    initImagePlaceholder() {\n        const posterUrlWebp = `https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`;\n        const posterUrlJpeg = `https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;\n        this.domRefImg.fallback.loading = this.posterLoading;\n        this.domRefImg.webp.srcset = posterUrlWebp;\n        this.domRefImg.jpeg.srcset = posterUrlJpeg;\n        this.domRefImg.fallback.src = posterUrlJpeg;\n        this.domRefImg.fallback.setAttribute('aria-label', `${this.videoPlay}: ${this.videoTitle}`);\n        this.domRefImg?.fallback?.setAttribute('alt', `${this.videoPlay}: ${this.videoTitle}`);\n    }\n    initIntersectionObserver() {\n        const options = {\n            root: null,\n            rootMargin: '0px',\n            threshold: 0,\n        };\n        const observer = new IntersectionObserver((entries, observer) => {\n            entries.forEach(entry => {\n                if (entry.isIntersecting && !this.isIframeLoaded) {\n                    LiteYTEmbed.warmConnections();\n                    this.addIframe(true);\n                    observer.unobserve(this);\n                }\n            });\n        }, options);\n        observer.observe(this);\n    }\n    attemptShortAutoPlay() {\n        if (this.isYouTubeShort()) {\n            setTimeout(() => {\n                this.shadowRoot\n                    .querySelector('iframe')\n                    ?.contentWindow?.postMessage('{\"event\":\"command\",\"func\":\"' + 'playVideo' + '\",\"args\":\"\"}', '*');\n            }, 2000);\n        }\n    }\n    isYouTubeShort() {\n        return (this.getAttribute('short') === '' &&\n            window.matchMedia('(max-width: 40em)').matches);\n    }\n    static addPrefetch(kind, url) {\n        const linkElem = document.createElement('link');\n        linkElem.rel = kind;\n        linkElem.href = url;\n        linkElem.crossOrigin = 'true';\n        document.head.append(linkElem);\n    }\n    static warmConnections() {\n        if (LiteYTEmbed.isPreconnected || window.liteYouTubeIsPreconnected)\n            return;\n        LiteYTEmbed.addPrefetch('preconnect', 'https://i.ytimg.com/');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://s.ytimg.com');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://www.youtube.com');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://www.google.com');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://googleads.g.doubleclick.net');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://static.doubleclick.net');\n        LiteYTEmbed.isPreconnected = true;\n        window.liteYouTubeIsPreconnected = true;\n    }\n}\nLiteYTEmbed.isPreconnected = false;\ncustomElements.define('lite-youtube', LiteYTEmbed);\n//# sourceMappingURL=lite-youtube.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import '@justinribeiro/lite-youtube';\nimport '@slightlyoff/lite-vimeo';\n"],"names":[],"sourceRoot":""}