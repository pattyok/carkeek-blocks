(()=>{"use strict";var e,t={114:(e,t,o)=>{const i=window.React,n=window.wp.blocks,r=window.wp.blockEditor,a=window.wp.i18n,s=window.wp.components,l=window.wp.element,d=window.wp.serverSideRender;var c=o.n(d);class h extends HTMLElement{constructor(){super(),this.isIframeLoaded=!1,this.setupDom()}static get observedAttributes(){return["videoid","playlistid"]}connectedCallback(){this.addEventListener("pointerover",h.warmConnections,{once:!0}),this.addEventListener("click",(()=>this.addIframe()))}get videoId(){return encodeURIComponent(this.getAttribute("videoid")||"")}set videoId(e){this.setAttribute("videoid",e)}get playlistId(){return encodeURIComponent(this.getAttribute("playlistid")||"")}set playlistId(e){this.setAttribute("playlistid",e)}get videoTitle(){return this.getAttribute("videotitle")||"Video"}set videoTitle(e){this.setAttribute("videotitle",e)}get videoPlay(){return this.getAttribute("videoPlay")||"Play"}set videoPlay(e){this.setAttribute("videoPlay",e)}get videoStartAt(){return this.getAttribute("videoStartAt")||"0"}get autoLoad(){return this.hasAttribute("autoload")}get noCookie(){return this.hasAttribute("nocookie")}get posterQuality(){return this.getAttribute("posterquality")||"hqdefault"}get posterLoading(){return this.getAttribute("posterloading")||"lazy"}get params(){return`start=${this.videoStartAt}&${this.getAttribute("params")}`}set params(e){this.setAttribute("params",e)}setupDom(){const e=this.attachShadow({mode:"open"});let t="";window.liteYouTubeNonce&&(t=`nonce="${window.liteYouTubeNonce}"`),e.innerHTML=`\n      <style ${t}>\n        :host {\n          contain: content;\n          display: block;\n          position: relative;\n          width: 100%;\n          padding-bottom: calc(100% / (16 / 9));\n        }\n\n        @media (max-width: 40em) {\n          :host([short]) {\n            padding-bottom: calc(100% / (9 / 16));\n          }\n        }\n\n        #frame, #fallbackPlaceholder, iframe {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n        }\n\n        #frame {\n          cursor: pointer;\n        }\n\n        #fallbackPlaceholder {\n          object-fit: cover;\n        }\n\n        #frame::before {\n          content: '';\n          display: block;\n          position: absolute;\n          top: 0;\n          background-image: linear-gradient(180deg, #111 -20%, transparent 90%);\n          height: 60px;\n          width: 100%;\n          z-index: 1;\n        }\n\n        #playButton {\n          width: 68px;\n          height: 48px;\n          background-color: transparent;\n          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>');\n          z-index: 1;\n          border: 0;\n          border-radius: inherit;\n        }\n\n        #playButton:before {\n          content: '';\n          border-style: solid;\n          border-width: 11px 0 11px 19px;\n          border-color: transparent transparent transparent #fff;\n        }\n\n        #playButton,\n        #playButton:before {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate3d(-50%, -50%, 0);\n          cursor: inherit;\n        }\n\n        /* Post-click styles */\n        .activated {\n          cursor: unset;\n        }\n\n        #frame.activated::before,\n        #frame.activated > #playButton {\n          display: none;\n        }\n      </style>\n      <div id="frame">\n        <picture>\n          <source id="webpPlaceholder" type="image/webp">\n          <source id="jpegPlaceholder" type="image/jpeg">\n          <img id="fallbackPlaceholder" referrerpolicy="origin" loading="lazy">\n        </picture>\n        <button id="playButton"></button>\n      </div>\n    `,this.domRefFrame=e.querySelector("#frame"),this.domRefImg={fallback:e.querySelector("#fallbackPlaceholder"),webp:e.querySelector("#webpPlaceholder"),jpeg:e.querySelector("#jpegPlaceholder")},this.domRefPlayButton=e.querySelector("#playButton")}setupComponent(){this.initImagePlaceholder(),this.domRefPlayButton.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.setAttribute("title",`${this.videoPlay}: ${this.videoTitle}`),(this.autoLoad||this.isYouTubeShort())&&this.initIntersectionObserver()}attributeChangedCallback(e,t,o){switch(e){case"videoid":case"playlistid":case"videoTitle":case"videoPlay":t!==o&&(this.setupComponent(),this.domRefFrame.classList.contains("activated")&&(this.domRefFrame.classList.remove("activated"),this.shadowRoot.querySelector("iframe").remove(),this.isIframeLoaded=!1))}}addIframe(e=!1){if(!this.isIframeLoaded){let t=e?0:1;const o=this.noCookie?"-nocookie":"";let i;i=this.playlistId?`?listType=playlist&list=${this.playlistId}&`:`${this.videoId}?`,this.isYouTubeShort()&&(this.params=`loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`,t=1);const n=`\n<iframe frameborder="0" title="${this.videoTitle}"\n  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen\n  src="https://www.youtube${o}.com/embed/${i}autoplay=${t}&${this.params}"\n></iframe>`;this.domRefFrame.insertAdjacentHTML("beforeend",n),this.domRefFrame.classList.add("activated"),this.isIframeLoaded=!0,this.attemptShortAutoPlay(),this.dispatchEvent(new CustomEvent("liteYoutubeIframeLoaded",{detail:{videoId:this.videoId},bubbles:!0,cancelable:!0}))}}initImagePlaceholder(){const e=`https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`,t=`https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;this.domRefImg.fallback.loading=this.posterLoading,this.domRefImg.webp.srcset=e,this.domRefImg.jpeg.srcset=t,this.domRefImg.fallback.src=t,this.domRefImg.fallback.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.domRefImg?.fallback?.setAttribute("alt",`${this.videoPlay}: ${this.videoTitle}`)}initIntersectionObserver(){new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&!this.isIframeLoaded&&(h.warmConnections(),this.addIframe(!0),t.unobserve(this))}))}),{root:null,rootMargin:"0px",threshold:0}).observe(this)}attemptShortAutoPlay(){this.isYouTubeShort()&&setTimeout((()=>{this.shadowRoot.querySelector("iframe")?.contentWindow?.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}),2e3)}isYouTubeShort(){return""===this.getAttribute("short")&&window.matchMedia("(max-width: 40em)").matches}static addPrefetch(e,t){const o=document.createElement("link");o.rel=e,o.href=t,o.crossOrigin="true",document.head.append(o)}static warmConnections(){h.isPreconnected||window.liteYouTubeIsPreconnected||(h.addPrefetch("preconnect","https://i.ytimg.com/"),h.addPrefetch("preconnect","https://s.ytimg.com"),h.addPrefetch("preconnect","https://www.youtube.com"),h.addPrefetch("preconnect","https://www.google.com"),h.addPrefetch("preconnect","https://googleads.g.doubleclick.net"),h.addPrefetch("preconnect","https://static.doubleclick.net"),h.isPreconnected=!0,window.liteYouTubeIsPreconnected=!0)}}h.isPreconnected=!1,customElements.define("lite-youtube",h);let u=(()=>{class e extends HTMLElement{constructor(){super(),this.iframeLoaded=!1,this.setupDom()}static get observedAttributes(){return["videoid"]}connectedCallback(){this.addEventListener("pointerover",e.warmConnections,{once:!0}),this.addEventListener("click",(()=>this.addIframe()))}get videoId(){return encodeURIComponent(this.getAttribute("videoid")||"")}set videoId(e){this.setAttribute("videoid",e)}get videoTitle(){return this.getAttribute("videotitle")||"Video"}set videoTitle(e){this.setAttribute("videotitle",e)}get videoPlay(){return this.getAttribute("videoPlay")||"Play"}set videoPlay(e){this.setAttribute("videoPlay",e)}get videoStartAt(){return this.getAttribute("videoPlay")||"0s"}set videoStartAt(e){this.setAttribute("videoPlay",e)}get autoLoad(){return this.hasAttribute("autoload")}set autoLoad(e){e?this.setAttribute("autoload",""):this.removeAttribute("autoload")}get autoPlay(){return this.hasAttribute("autoplay")}set autoPlay(e){e?this.setAttribute("autoplay","autoplay"):this.removeAttribute("autoplay")}setupDom(){this.attachShadow({mode:"open"}).innerHTML='\n      <style>\n        :host {\n          contain: content;\n          display: block;\n          position: relative;\n          width: 100%;\n          padding-bottom: calc(100% / (16 / 9));\n        }\n\n        #frame, #fallbackPlaceholder, iframe {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n        }\n\n        #frame {\n          cursor: pointer;\n        }\n\n        #fallbackPlaceholder {\n          object-fit: cover;\n        }\n\n        #frame::before {\n          content: \'\';\n          display: block;\n          position: absolute;\n          top: 0;\n          background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==);\n          background-position: top;\n          background-repeat: repeat-x;\n          height: 60px;\n          padding-bottom: 50px;\n          width: 100%;\n          transition: all 0.2s cubic-bezier(0, 0, 0.2, 1);\n          z-index: 1;\n        }\n        /* play button */\n        .lvo-playbtn {\n          width: 70px;\n          height: 46px;\n          background-color: #212121;\n          z-index: 1;\n          opacity: 0.8;\n          border-radius: 10%;\n          transition: all 0.2s cubic-bezier(0, 0, 0.2, 1);\n          border: 0;\n        }\n        #frame:hover .lvo-playbtn {\n          background-color: rgb(98, 175, 237);\n          opacity: 1;\n        }\n        /* play button triangle */\n        .lvo-playbtn:before {\n          content: \'\';\n          border-style: solid;\n          border-width: 11px 0 11px 19px;\n          border-color: transparent transparent transparent #fff;\n        }\n        .lvo-playbtn,\n        .lvo-playbtn:before {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate3d(-50%, -50%, 0);\n        }\n\n        /* Post-click styles */\n        .lvo-activated {\n          cursor: unset;\n        }\n\n        #frame.lvo-activated::before,\n        .lvo-activated .lvo-playbtn {\n          display: none;\n        }\n      </style>\n      <div id="frame">\n        <picture>\n          <source id="webpPlaceholder" type="image/webp">\n          <source id="jpegPlaceholder" type="image/jpeg">\n          <img id="fallbackPlaceholder"\n               referrerpolicy="origin"\n               width="1100"\n               height="619"\n               decoding="async"\n               loading="lazy">\n        </picture>\n        <button class="lvo-playbtn"></button>\n      </div>\n    ',this.domRefFrame=this.shadowRoot.querySelector("#frame"),this.domRefImg={fallback:this.shadowRoot.querySelector("#fallbackPlaceholder"),webp:this.shadowRoot.querySelector("#webpPlaceholder"),jpeg:this.shadowRoot.querySelector("#jpegPlaceholder")},this.domRefPlayButton=this.shadowRoot.querySelector(".lvo-playbtn")}setupComponent(){this.initImagePlaceholder(),this.domRefPlayButton.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.setAttribute("title",`${this.videoPlay}: ${this.videoTitle}`),this.autoLoad&&this.initIntersectionObserver()}attributeChangedCallback(e,t,o){"videoid"===e&&t!==o&&(this.setupComponent(),this.domRefFrame.classList.contains("lvo-activated")&&(this.domRefFrame.classList.remove("lvo-activated"),this.shadowRoot.querySelector("iframe").remove()))}addIframe(){if(!this.iframeLoaded){const e=this.autoLoad&&this.autoPlay||!this.autoLoad?"autoplay=1":"",t=`\n<iframe frameborder="0"\n  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"\n  allowfullscreen src="${new URL(`/video/${this.videoId}?${e}&#t=${this.videoStartAt}`,"https://player.vimeo.com/")}"></iframe>`;this.domRefFrame.insertAdjacentHTML("beforeend",t),this.domRefFrame.classList.add("lvo-activated"),this.iframeLoaded=!0}}async initImagePlaceholder(){e.addPrefetch("preconnect","https://i.vimeocdn.com/");const t=`https://vimeo.com/api/v2/video/${this.videoId}.json`,o=(await(await fetch(t)).json())[0].thumbnail_large,i=o.substr(o.lastIndexOf("/")+1).split("_")[0],n=`https://i.vimeocdn.com/video/${i}.webp?mw=1100&mh=619&q=70`,r=`https://i.vimeocdn.com/video/${i}.jpg?mw=1100&mh=619&q=70`;this.domRefImg.webp.srcset=n,this.domRefImg.jpeg.srcset=r,this.domRefImg.fallback.src=r,this.domRefImg.fallback.setAttribute("aria-label",`${this.videoPlay}: ${this.videoTitle}`),this.domRefImg.fallback.setAttribute("alt",`${this.videoPlay}: ${this.videoTitle}`)}initIntersectionObserver(){"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&new IntersectionObserver(((t,o)=>{t.forEach((t=>{t.isIntersecting&&!this.iframeLoaded&&(e.warmConnections(),this.addIframe(),o.unobserve(this))}))}),{root:null,rootMargin:"0px",threshold:0}).observe(this)}static addPrefetch(e,t,o){const i=document.createElement("link");i.rel=e,i.href=t,o&&(i.as=o),i.crossOrigin="true",document.head.append(i)}static warmConnections(){e.preconnected||(e.addPrefetch("preconnect","https://f.vimeocdn.com"),e.addPrefetch("preconnect","https://player.vimeo.com"),e.addPrefetch("preconnect","https://i.vimeocdn.com"),e.preconnected=!0)}}return e.preconnected=!1,e})();customElements.define("lite-vimeo",u);const p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"carkeek-blocks/video-lite","version":"0.1.0","title":"Video Lite","category":"widgets","description":"Embed YouTube or Vimeo files that load litely.","keywords":["video","youtube","vimeo","embed"],"supports":{"html":false,"align":["wide","full"],"spacing":{"padding":true,"margin":true}},"textdomain":"carkeek-blocks","attributes":{"videoUrl":{"type":"string","default":""},"videoId":{"type":"string","default":""},"source":{"type":"string","default":"youtube"},"align":{"type":"string","default":""},"className":{"type":"string","default":""},"innerBlocks_length":{"type":"number","default":0},"style":{"type":"object","default":{"spacing":{"margin":{},"padding":{}}}}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScript":["file:./script.js","carkeek-blocks-video-lite-view-script"],"render":"file:./render.php"}'),m={};m.video=(0,i.createElement)("svg",{width:"100pt",height:"100pt",version:"1.1",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("path",{d:"m33.625 32.367c-4.1875 0-7.5586 3.3711-7.5586 7.5586v20.152c0 4.1875 3.3711 7.5586 7.5586 7.5586h32.746c4.1875 0 7.5586-3.3711 7.5586-7.5586v-20.152c0-4.1875-3.3711-7.5586-7.5586-7.5586zm10.707 9.4453 15.113 8.1875-15.113 8.1875z"}));const b=m;(0,n.registerBlockType)(p,{icon:b.video,edit:function(e){const{attributes:t,setAttributes:o,name:n}=e,{videoId:d,source:h,videoUrl:u}=t,p=!d||!h,[m,b]=(0,l.useState)(p),[v,f]=(0,l.useState)(!1),g=()=>(0,i.createElement)(s.ToolbarGroup,null,(0,i.createElement)(s.ToolbarButton,{icon:"edit",label:"Edit Video",onClick:()=>b(!m)}));return!d||m?(0,i.createElement)("div",{...(0,r.useBlockProps)()},(0,i.createElement)(r.BlockControls,null,(0,i.createElement)(g,null)),(0,i.createElement)("div",{className:"video-lite-wrapper"},(0,i.createElement)("h3",null,"Lite Video Embed"),(0,i.createElement)("p",null,"Enter the URL of your video in one of the formats as shown below"),(0,i.createElement)("ul",null,(0,i.createElement)("li",null,(0,i.createElement)("strong",null,"Vimeo")," https://vimeo.com/123456789"),(0,i.createElement)("li",null,(0,i.createElement)("strong",null,"Youtube")," https://youtu.be/a123b456 OR https://www.youtube.com/watch?v=a123b456")),(0,i.createElement)(s.TextControl,{label:"Video URL",value:u,onChange:e=>o({videoUrl:e})}),v&&(0,i.createElement)("p",{className:"error"},"Sorry, that does not look like a properly formed Vimeo or Youtube Url."),(0,i.createElement)(s.Button,{onClick:()=>(e=>{if(e){const t=new URL(e),i=t.pathname.split("/");let n=i[i.length-1];if(t.hostname.includes("youtu.be"))o({source:"youtube"}),o({videoId:n}),f(!1);else if("vimeo.com"==t.hostname)o({source:"vimeo"}),f(!1),o({videoId:n});else if(t.hostname.includes("youtube.com")){o({source:"youtube"});const e=t.searchParams.get("v");e?(f(!1),o({videoId:e})):(f(!0),o({videoId:""}))}else f(!0),o({youtubeId:""});b(!1)}})(u)},(0,a.__)("Set Video")))):(0,i.createElement)("div",{...(0,r.useBlockProps)()},(0,i.createElement)(r.BlockControls,null,(0,i.createElement)(g,null)),(0,i.createElement)(r.InspectorControls,null,(0,i.createElement)(s.PanelBody,{title:(0,a.__)("Backround Image"),initialOpen:!0})),(0,i.createElement)(c(),{block:n,attributes:t}),(0,i.createElement)(r.InnerBlocks,{className:"ck-video-lite-inner-blocks",template:[["core/paragraph",{align:"center",placeholder:"Enter video caption..."}]]}))},save:()=>(0,i.createElement)(r.InnerBlocks.Content,null)})}},o={};function i(e){var n=o[e];if(void 0!==n)return n.exports;var r=o[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,o,n,r)=>{if(!o){var a=1/0;for(c=0;c<e.length;c++){for(var[o,n,r]=e[c],s=!0,l=0;l<o.length;l++)(!1&r||a>=r)&&Object.keys(i.O).every((e=>i.O[e](o[l])))?o.splice(l--,1):(s=!1,r<a&&(a=r));if(s){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,n,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={740:0,516:0};i.O.j=t=>0===e[t];var t=(t,o)=>{var n,r,[a,s,l]=o,d=0;if(a.some((t=>0!==e[t]))){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(l)var c=l(i)}for(t&&t(o);d<a.length;d++)r=a[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},o=globalThis.webpackChunkcarkeek_blocks_v2=globalThis.webpackChunkcarkeek_blocks_v2||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=i.O(void 0,[516],(()=>i(114)));n=i.O(n)})();