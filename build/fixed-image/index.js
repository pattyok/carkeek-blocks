!function(){var e,t={716:function(e,t,i){"use strict";var r=window.wp.element,a=i(184),l=i.n(a),n=window.lodash,o=window.wp.blob,s=window.wp.components,c=window.wp.data,u=window.wp.blockEditor,g=window.wp.i18n,m=window.wp.compose,p=window.wp.url,d=window.wp.blocks;function f(e){let{attributes:{url:t="",alt:i,caption:a,id:l,href:f,rel:b,linkStyle:h,linkDestination:y,title:k,linkTarget:v,focalPoint:E,sizeSlug:w,useCaption:_,useLink:x,photoCredit:C,aspectRatio:S},setAttributes:T,isSelected:N,insertBlocksAfter:P,onSelectImage:R,onUploadError:z}=e;const B=(0,r.useRef)(),I=(0,m.usePrevious)(t),{image:$,multiImageSelection:F}=(0,c.useSelect)((e=>{const{getMedia:t}=e("core"),{getMultiSelectedBlockClientIds:i,getBlockName:r,getSelectedBlock:a,getSelectedBlockClientId:n}=e("core/block-editor"),o=i();return{block:a(),currentId:n(),image:l&&N?t(l):null,multiImageSelection:o.length&&o.every((e=>"carkeek-blocks/fixed-image"===r(e)))}}),[l,N]),{imageSizes:L}=(0,c.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return(0,n.pick)(t(),["imageSizes","maxWidth","mediaUpload"])})),[O,j]=(0,r.useState)(!1),[U,A]=(0,r.useState)(!1),D=(0,n.map)((0,n.filter)(L,(e=>{let{slug:t}=e;return(0,n.get)($,["media_details","sizes",t,"source_url"])})),(e=>{let{name:t,slug:i}=e;return{value:i,label:t}}));function M(e){T(e)}(0,r.useEffect)((()=>{N||j(!1)}),[N]),(0,r.useEffect)((()=>{t&&!I&&N&&_&&B.current.focus()}),[t,I]),(0,r.useEffect)((()=>{N||A(!1)}),[N]);const W=(0,r.createElement)(r.Fragment,null,(0,r.createElement)(u.BlockControls,null,x&&!F&&!U&&(0,r.createElement)(s.ToolbarGroup,null,(0,r.createElement)(s.ToolbarItem,null,(()=>(0,r.createElement)(u.__experimentalImageURLInputUI,{url:f||"",onChangeUrl:M,linkDestination:y,mediaUrl:$&&$.source_url||t,mediaLink:$&&$.link,linkTarget:v,linkClass:h,rel:b})))),!F&&!U&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(s.ToolbarItem,null,(()=>(0,r.createElement)(u.MediaReplaceFlow,{mediaId:l,mediaURL:t,allowedTypes:["image"],accept:"image/*",onSelect:R,onError:z}))),(0,r.createElement)(s.ToolbarButton,{className:"components-icon-button components-toolbar__control",label:(0,g.__)("Remove Image","carkeek-blocks"),onClick:function(){T({url:void 0,id:void 0})},icon:"trash"}))),(0,r.createElement)(u.InspectorControls,null,(0,r.createElement)(s.PanelBody,{title:(0,g.__)("Image settings")},(0,r.createElement)(s.SelectControl,{label:(0,g.__)("Image Orientation","carkeek-blocks"),onChange:e=>T({aspectRatio:e}),options:[{label:(0,g.__)("Landscape 2:3"),value:"landscape"},{label:(0,g.__)("Landscape 3:4"),value:"landscape-34"},{label:(0,g.__)("Portrait 3:2"),value:"portrait"},{label:(0,g.__)("Portrait 4:3"),value:"portrait-43"},{label:(0,g.__)("Square 1:1"),value:"square"}],value:S}),!F&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(s.TextareaControl,{label:(0,g.__)("Alt text (alternative text)"),value:i,onChange:function(e){T({alt:e})},help:(0,r.createElement)(r.Fragment,null,(0,r.createElement)(s.ExternalLink,{href:"https://www.w3.org/WAI/tutorials/images/decision-tree"},(0,g.__)("Describe the purpose of the image")),(0,g.__)("Leave empty if the image is purely decorative."))}),(0,r.createElement)(s.TextControl,{label:(0,g.__)("Photo Credit"),value:C||"",onChange:e=>T({photoCredit:e}),help:(0,r.createElement)(r.Fragment,null,(0,g.__)("Optionally add a photo credit. This may display differently depending on the context of the image."))}),(0,r.createElement)(s.SelectControl,{label:(0,g.__)("Image Size","carkeek-blocks"),options:D,onChange:function(e){const t=(0,n.get)($,["media_details","sizes",e,"source_url"]);if(!t)return null;T({url:t,width:void 0,height:void 0,sizeSlug:e})},value:w}),(0,r.createElement)(s.FocalPointPicker,{label:(0,g.__)("Focal Point","carkeek-blocks"),url:t,onChange:e=>T({focalPoint:e}),value:E})))),(0,r.createElement)(u.InspectorAdvancedControls,null,(0,r.createElement)(s.ToggleControl,{label:(0,g.__)("Include Caption"),checked:_,onChange:e=>T({useCaption:e})}),(0,r.createElement)(s.ToggleControl,{label:(0,g.__)("Include Image Link"),checked:x,onChange:e=>T({useLink:e})}),(0,r.createElement)(s.TextControl,{label:(0,g.__)("Title attribute"),value:k||"",onChange:function(e){T({title:e})},help:(0,r.createElement)(r.Fragment,null,(0,g.__)("Describe the role of this image on the page."),(0,r.createElement)(s.ExternalLink,{href:"https://www.w3.org/TR/html52/dom.html#the-title-attribute"},(0,g.__)("(Note: many devices and browsers do not display this text.)")))}))),q=function(e){const t=(0,p.getPath)(e);if(t)return(0,n.last)(t.split("/"))}(t);let G;G=i||(q?(0,g.sprintf)(
/* translators: %s: file name */
(0,g.__)("This image has an empty alt attribute; its file name is %s"),q):(0,g.__)("This image has an empty alt attribute"));let J={};E&&(J.objectPosition=`${100*E.x}% ${100*E.y}%`);let V=(0,r.createElement)(r.Fragment,null,(0,r.createElement)("img",{src:t,alt:G,onClick:function(){O&&j(!1)},className:"ck-fixed-image",style:J}),(0,o.isBlobURL)(t)&&(0,r.createElement)(s.Spinner,null));const H=(0,r.createElement)("div",{className:"ck-fixed-image-credit"},C);return(0,r.createElement)(r.Fragment,null,W,(0,r.createElement)("div",{className:"ck-fixed-image-wrap"},H,V),_&&(!u.RichText.isEmpty(a)||N)&&(0,r.createElement)(u.RichText,{ref:B,tagName:"figcaption","aria-label":(0,g.__)("Image caption text"),placeholder:(0,g.__)("Write captionâ€¦"),value:a,unstableOnFocus:function(){O||j(!0)},onChange:e=>T({caption:e}),isSelected:O,inlineToolbar:!0,__unstableOnSplitAtEnd:()=>P((0,d.createBlock)("core/paragraph"))}))}const b=(e,t)=>!e&&(0,o.isBlobURL)(t);var h=(0,s.withNotices)((function(e){let{attributes:t,setAttributes:i,isSelected:a,className:s,noticeUI:m,insertBlocksAfter:p,onReplace:d,noticeOperations:h}=e;const{url:y="",alt:k,caption:v,id:E,width:w,height:_,sizeSlug:x,aspectRatio:C}=t,S=(0,r.useRef)();(0,r.useEffect)((()=>{S.current=k}),[k]);const T=(0,r.useRef)();(0,r.useEffect)((()=>{T.current=v}),[v]);const N=(0,r.useRef)(),P=(0,c.useSelect)((e=>{const{getSettings:t}=e("core/block-editor");return t().mediaUpload}));function R(e){h.removeAllNotices(),h.createErrorNotice(e)}function z(e){if(!e||!e.url)return void i({url:void 0,alt:void 0,id:void 0,title:void 0,caption:void 0});let t,r=(e=>{const t=(0,n.pick)(e,["alt","id","link","caption"]);return t.url=(0,n.get)(e,["sizes","large","url"])||(0,n.get)(e,["media_details","sizes","large","source_url"])||e.url,t})(e);b(E,y)&&S.current&&(r=(0,n.omit)(r,["alt"])),T.current&&!(0,n.get)(r,["caption"])&&(r=(0,n.omit)(r,["caption"])),t=e.id&&e.id===E?{url:y}:{width:void 0,height:void 0,sizeSlug:"large"},i({...r,...t})}const B=b(E,y);(0,r.useEffect)((()=>{if(!B)return;const e=(0,o.getBlobByURL)(y);e&&P({filesList:[e],onFileChange:e=>{let[t]=e;z(t)},allowedTypes:["image"],onError:e=>{h.createErrorNotice(e),i({src:void 0,id:void 0,url:void 0})}})}),[]),(0,r.useEffect)((()=>{if(B)return()=>{(0,o.revokeBlobURL)(y)}}),[B]);const I=((e,t)=>t&&!e&&!(0,o.isBlobURL)(t))(E,y),$=I?y:void 0,F=!!y&&(0,r.createElement)("img",{alt:(0,g.__)("Edit image"),title:(0,g.__)("Edit image"),className:"edit-image-preview",src:y}),L=l()(s,{"is-transient":(0,o.isBlobURL)(y),"is-placeholder":!y,"is-resized":!!w||!!_,"is-focused":a,[`size-${x}`]:x,[`fixed-image-${C}`]:C}),O=(0,u.useBlockProps)({ref:N,className:L});return(0,r.createElement)("figure",O,y&&(0,r.createElement)(f,{attributes:t,setAttributes:i,isSelected:a,insertBlocksAfter:p,onReplace:d,onSelectImage:z,onUploadError:R,containerRef:N,aspectRatio:C}),(0,r.createElement)(u.MediaPlaceholder,{icon:"format-image",onSelect:z,notices:m,onError:R,allowedTypes:["image"],value:{id:E,src:$},mediaPreview:F,disableMediaButtons:y}))})),y=[{attributes:{id:{type:"number"},url:{type:"string",source:"attribute",selector:"img",attribute:"src"},focalPoint:{type:"object"},alt:{type:"string",source:"attribute",selector:"img",attribute:"alt",default:""},title:{type:"string",source:"attribute",selector:"img",attribute:"title"},sizeSlug:{type:"string",default:"large"},width:{type:"string"},height:{type:"string"},useCaption:{type:"boolean",default:!1},useLink:{type:"boolean",default:!0},caption:{type:"string",source:"html",selector:"figcaption"},photoCredit:{type:"string",source:"html",selector:".ck-fixed-image-credit"},href:{type:"string",source:"attribute",selector:"figure > a",attribute:"href"},rel:{type:"string",source:"attribute",selector:"figure > a",attribute:"rel"},linkClass:{type:"string",source:"attribute"},linkDestination:{type:"string"},linkTarget:{type:"string",source:"attribute",selector:"figure > a",attribute:"target"}},save:function(e){let{attributes:t}=e;const{url:i,alt:a,href:o,rel:s,width:c,height:g,id:m,linkTarget:p,sizeSlug:d,title:f,caption:b,useCaption:h,focalPoint:y,linkStyle:k,photoCredit:v}=t,E=(0,n.isEmpty)(s)?void 0:s,w=l()({[`size-${d}`]:d});let _={};y&&(_.objectPosition=`${100*y.x}% ${100*y.y}%`);const x=l()({[`${k}`]:k,"ck-fixed-image-wrap":!0}),C=(0,r.createElement)(r.Fragment,null,(0,r.createElement)("img",{src:i,alt:a,className:m?`wp-image-${m}`:null,width:c,height:g,title:f,style:_}),v&&(0,r.createElement)("div",{className:"ck-fixed-image-credit"},v)),S=(0,r.createElement)(r.Fragment,null,o?(0,r.createElement)("a",{className:x,href:o,target:p,rel:E},C):(0,r.createElement)("div",{className:"ck-fixed-image-wrap"},C),h&&!u.RichText.isEmpty(b)&&(0,r.createElement)(u.RichText.Content,{tagName:"figcaption",value:b}));return(0,r.createElement)(r.Fragment,null,i&&(0,r.createElement)("figure",u.useBlockProps.save({className:w}),S))}},{attributes:{id:{type:"number"},url:{type:"string",source:"attribute",selector:"img",attribute:"src"},focalPoint:{type:"object"},alt:{type:"string",source:"attribute",selector:"img",attribute:"alt",default:""},title:{type:"string",source:"attribute",selector:"img",attribute:"title"},sizeSlug:{type:"string",default:"large"},width:{type:"string"},height:{type:"string"},useCaption:{type:"boolean",default:!1},useLink:{type:"boolean",default:!0},caption:{type:"string",source:"html",selector:"figcaption"},href:{type:"string",source:"attribute",selector:"figure > a",attribute:"href"},rel:{type:"string",source:"attribute",selector:"figure > a",attribute:"rel"},linkClass:{type:"string",source:"attribute"},linkDestination:{type:"string"},linkTarget:{type:"string",source:"attribute",selector:"figure > a",attribute:"target"}},save(e){let{attributes:t}=e;const{url:i,alt:a,href:o,rel:s,width:c,height:g,id:m,linkTarget:p,sizeSlug:d,title:f,caption:b,useCaption:h,focalPoint:y,linkStyle:k}=t,v=(0,n.isEmpty)(s)?void 0:s,E=l()({[`size-${d}`]:d});let w={};y&&(w.objectPosition=`${100*y.x}% ${100*y.y}%`);const _=l()({[`${k}`]:k,"ck-fixed-image-wrap":!0}),x=(0,r.createElement)("img",{src:i,alt:a,className:m?`wp-image-${m}`:null,width:c,height:g,title:f,style:w}),C=(0,r.createElement)(r.Fragment,null,o?(0,r.createElement)("a",{className:_,href:o,target:p,rel:v},x):(0,r.createElement)("div",{className:"ck-fixed-image-wrap"},x),h&&!u.RichText.isEmpty(b)&&(0,r.createElement)(u.RichText.Content,{tagName:"figcaption",value:b}));return(0,r.createElement)("figure",u.useBlockProps.save({className:E}),C)}},{attributes:{id:{type:"number"},url:{type:"string",source:"attribute",selector:"img",attribute:"src"},focalPoint:{type:"object"},alt:{type:"string",source:"attribute",selector:"img",attribute:"alt",default:""},title:{type:"string",source:"attribute",selector:"img",attribute:"title"},sizeSlug:{type:"string",default:"large"},width:{type:"string"},height:{type:"string"},useCaption:{type:"boolean",default:!1},useLink:{type:"boolean",default:!0},caption:{type:"string",source:"html",selector:"figcaption"},href:{type:"string",source:"attribute",selector:"figure > a",attribute:"href"},rel:{type:"string",source:"attribute",selector:"figure > a",attribute:"rel"},linkClass:{type:"string",source:"attribute",selector:"figure > a",attribute:"class"},linkDestination:{type:"string"},linkTarget:{type:"string",source:"attribute",selector:"figure > a",attribute:"target"}},save(e){let{attributes:t}=e;const{url:i,alt:a,href:o,rel:s,linkClass:c,width:g,height:m,id:p,linkTarget:d,sizeSlug:f,title:b,caption:h,useCaption:y,focalPoint:k}=t,v=(0,n.isEmpty)(s)?void 0:s,E=l()({[`size-${f}`]:f});let w={};k&&(w.objectPosition=`${100*k.x}% ${100*k.y}%`);const _=(0,r.createElement)("img",{src:i,alt:a,className:p?`wp-image-${p}`:null,width:g,height:m,title:b,style:w}),x=(0,r.createElement)(r.Fragment,null,o?(0,r.createElement)("a",{className:`'ck-fixed-image-wrap' ${c}`,href:o,target:d,rel:v},_):(0,r.createElement)("div",{className:"ck-fixed-image-wrap"},_),y&&!u.RichText.isEmpty(h)&&(0,r.createElement)(u.RichText.Content,{tagName:"figcaption",value:h}));return(0,r.createElement)("figure",u.useBlockProps.save({className:E}),x)}}],k=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"carkeek-blocks/fixed-image","version":"0.1.0","title":"Fixed Image","category":"widgets","icon":"smiley","description":"Create an image cropped to a fixed size","supports":{"html":false,"align":["wide","full"],"typography":{"fontSize":true},"color":{"background":true,"gradients":false,"text":true}},"textdomain":"carkeek-blocks","attributes":{"id":{"type":"number"},"url":{"type":"string","source":"attribute","selector":"img","attribute":"src"},"focalPoint":{"type":"object"},"alt":{"type":"string","source":"attribute","selector":"img","attribute":"alt","default":""},"title":{"type":"string","source":"attribute","selector":"img","attribute":"title"},"sizeSlug":{"type":"string","default":"large"},"width":{"type":"string"},"height":{"type":"string"},"useCaption":{"type":"boolean","default":false},"useLink":{"type":"boolean","default":true},"caption":{"type":"string","source":"html","selector":"figcaption"},"photoCredit":{"type":"string","source":"html","selector":".ck-fixed-image-credit"},"href":{"type":"string","source":"attribute","selector":"figure > a","attribute":"href"},"rel":{"type":"string","source":"attribute","selector":"figure > a","attribute":"rel"},"linkClass":{"type":"string","source":"attribute"},"aspectRatio":{"type":"string"},"linkDestination":{"type":"string"},"linkTarget":{"type":"string","source":"attribute","selector":"figure > a","attribute":"target"}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}');(0,d.registerBlockType)(k,{transforms:{from:[{type:"block",blocks:["core/image"],transform:e=>(0,d.createBlock)("carkeek-blocks/fixed-image",{id:e.id,url:e.url})}],to:[{type:"block",blocks:["core/image"],transform:e=>(0,d.createBlock)("core/image",{id:e.id,url:e.url})}]},deprecated:y,save:function(e){let{attributes:t}=e;const{url:i,alt:a,href:o,rel:s,width:c,height:g,id:m,linkTarget:p,sizeSlug:d,title:f,caption:b,useCaption:h,focalPoint:y,linkStyle:k,photoCredit:v,aspectRatio:E}=t,w=(0,n.isEmpty)(s)?void 0:s,_=l()({[`size-${d}`]:d,[`fixed-image-${E}`]:E});let x={};y&&(x.objectPosition=`${100*y.x}% ${100*y.y}%`);const C=l()({[`${k}`]:k,"ck-fixed-image-wrap":!0}),S=(0,r.createElement)(r.Fragment,null,(0,r.createElement)("img",{src:i,alt:a,className:m?`wp-image-${m}`:null,width:c,height:g,title:f,style:x}),v&&(0,r.createElement)("div",{className:"ck-fixed-image-credit"},v)),T=(0,r.createElement)(r.Fragment,null,o?(0,r.createElement)("a",{className:C,href:o,target:p,rel:w},S):(0,r.createElement)("div",{className:"ck-fixed-image-wrap"},S),h&&!u.RichText.isEmpty(b)&&(0,r.createElement)(u.RichText.Content,{tagName:"figcaption",value:b}));return(0,r.createElement)(r.Fragment,null,i&&(0,r.createElement)("figure",u.useBlockProps.save({className:_}),T))},edit:h})},184:function(e,t){var i;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var l=typeof i;if("string"===l||"number"===l)e.push(i);else if(Array.isArray(i)){if(i.length){var n=a.apply(null,i);n&&e.push(n)}}else if("object"===l){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){e.push(i.toString());continue}for(var o in i)r.call(i,o)&&i[o]&&e.push(o)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(i=function(){return a}.apply(t,[]))||(e.exports=i)}()}},i={};function r(e){var a=i[e];if(void 0!==a)return a.exports;var l=i[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=function(t,i,a,l){if(!i){var n=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],l=e[u][2];for(var o=!0,s=0;s<i.length;s++)(!1&l||n>=l)&&Object.keys(r.O).every((function(e){return r.O[e](i[s])}))?i.splice(s--,1):(o=!1,l<n&&(n=l));if(o){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[i,a,l]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={378:0,64:0};r.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,l,n=i[0],o=i[1],s=i[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(s)var u=s(r)}for(t&&t(i);c<n.length;c++)l=n[c],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(u)},i=self.webpackChunkcarkeek_blocks_v2=self.webpackChunkcarkeek_blocks_v2||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var a=r.O(void 0,[64],(function(){return r(716)}));a=r.O(a)}();