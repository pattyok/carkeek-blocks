!function(t,e,a){"use strict";var r={};t.ARIAaccordion=r,r.NS="ARIAaccordion",r.AUTHOR="Scott O'Hara",r.VERSION="3.2.1",r.LICENSE="https://github.com/scottaohara/accessible_accordions/blob/master/LICENSE";var i="accordion__trigger",l="[data-aria-accordion-heading]",n="[data-aria-accordion-panel]",o=0;r.create=function(){var t,a,c,d,s,u,A="none",g=e.querySelectorAll("[data-aria-accordion]");for(o+=1,u=0;u<g.length;u++){var h;if((t=g[u]).hasAttribute("id")||(t.id="acc_"+o+"-"+u),t.classList.add("accordion"),e.querySelectorAll("#"+t.id+"> li").length?(a=e.querySelectorAll("#"+t.id+" li > "+n),c=e.querySelectorAll("#"+t.id+" li > "+l)):(a=e.querySelectorAll("#"+t.id+" > "+n),c=e.querySelectorAll("#"+t.id+" > "+l)),t.hasAttribute("data-default")&&(A=t.getAttribute("data-default")),s=t.hasAttribute("data-constant"),t.hasAttribute("data-multi"),t.hasAttribute("data-transition")){var b=t.querySelectorAll(n);for(h=0;h<b.length;h++)b[h].classList.add("accordion__panel--transition")}for(r.setupPanels(t.id,a,A,s),r.setupHeadingButton(c,s),d=e.querySelectorAll("#"+t.id+"> li").length?e.querySelectorAll("#"+t.id+" li > "+l+" ."+i):e.querySelectorAll("#"+t.id+" > "+l+" ."+i),h=0;h<d.length;h++)d[h].addEventListener("click",r.actions),d[h].addEventListener("keydown",r.keytrolls)}},r.setupPanels=function(t,e,a,r){var i,l,n,o,d;for(i=0;i<e.length;i++)n=t+"_panel_"+(i+1),o=a,d=r,(l=e[i]).setAttribute("id",n),c(e[0],!0),l.classList.add("accordion__panel"),"none"!==o&&NaN!==parseInt(o)&&(o<=1?c(e[0],!1):o-1>=e.length?c(e[e.length-1],!1):c(e[o-1],!1)),(d&&"none"===o||NaN===parseInt(o))&&c(e[0],!1)},r.setupHeadingButton=function(t,a){var r,l,n,o,c,s;for(s=0;s<t.length;s++)l=(r=t[s]).nextElementSibling.id,n=e.getElementById(l).getAttribute("aria-hidden"),o=e.createElement("button"),c=r.textContent,r.innerHTML="",r.classList.add("accordion__heading"),o.setAttribute("type","button"),o.setAttribute("aria-controls",l),o.setAttribute("id",l+"_trigger"),o.classList.add(i),"false"===n?(d(o,!0),u(o,!0),a&&o.setAttribute("aria-disabled","true")):(d(o,!1),u(o,!1)),r.appendChild(o),o.appendChild(e.createTextNode(c))},r.actions=function(t){var a,n=this.id.replace(/_panel.*$/g,""),o=e.getElementById(this.getAttribute("aria-controls"));a=e.querySelectorAll("#"+n+"> li").length?e.querySelectorAll("#"+n+" li > "+l+" ."+i):e.querySelectorAll("#"+n+" > "+l+" ."+i),t.preventDefault(),r.togglePanel(t,n,o,a)},r.togglePanel=function(t,a,r,i){var l,n,o=t.target;if("true"!==o.getAttribute("aria-disabled")&&(l=o.getAttribute("aria-controls"),u(o,"true"),"true"===o.getAttribute("aria-expanded")?(d(o,"false"),c(r,"true")):(d(o,"true"),c(r,"false"),e.getElementById(a).hasAttribute("data-constant")&&s(o,"true")),e.getElementById(a).hasAttribute("data-constant")||!e.getElementById(a).hasAttribute("data-multi")))for(n=0;n<i.length;n++)o!==i[n]&&(u(i[n],"false"),l=i[n].getAttribute("aria-controls"),s(i[n],"false"),d(i[n],"false"),c(e.getElementById(l),"true"))},r.keytrolls=function(t){if(t.target.classList.contains(i)){var a,r=t.keyCode||t.which,n=this.id.replace(/_panel.*$/g,"");switch(a=e.querySelectorAll("#"+n+"> li").length?e.querySelectorAll("#"+n+" li > "+l+" ."+i):e.querySelectorAll("#"+n+" > "+l+" ."+i),r){case 35:t.preventDefault(),a[a.length-1].focus();break;case 36:t.preventDefault(),a[0].focus()}}},r.init=function(){r.create()};var c=function(t,e){t.setAttribute("aria-hidden",e)},d=function(t,e){t.setAttribute("aria-expanded",e)},s=function(t,e){t.setAttribute("aria-disabled",e)},u=function(t,e){t.setAttribute("data-current",e)};r.init()}(window,document);